---
// layout
import PageLayout from "@layouts/PageLayout.astro";

// Components
import Skills from "@components/Skills.astro";
import Experiences from "@components/Experiences.astro";
import ProjectCard from "@components/ProjectCard.astro";
import { getEntry } from "astro:content";

// data
import { socials } from "src/constants";
const fetchedProjects = [];
fetchedProjects.push(await getEntry("projects", "orbit"));
fetchedProjects.push(await getEntry("projects", "audiophile"));
---

<PageLayout
	tabTitle="üëãüèΩ"
	description="Portfolio of Avinash, a frontend web developer focusing on minimal and functional web design."
>
	<section class="home-hero">
		<h1>Hello I'm Avinash üëãüèΩ</h1>
		<p class="hero-text">
			Welcome to my slice of the web. I'm a frontend web developer. This
			is where I share my work, my thoughts, my plans, and eventually
			everything else I want to put out into the world.
		</p>
	</section>

	<section class="home-section">
		<h2 class="section-title">Selected Work</h2>
		<div class="projects-list">
			{
				fetchedProjects.map((project) => {
					return <ProjectCard project={project} />;
				})
			}
		</div>
		<p class="section-footer">
			<a href="/projects">View all projects &rarr;</a>
		</p>
	</section>

	<section class="home-section">
		<h2 class="section-title">Toolkit</h2>
		<div class="skills-container">
			<Skills />
		</div>
		<blockquote class="skills-note">
			For an exhaustive list, read <a href="/notes/skills-and-tools"
				>my public note on skills and tools.</a
			>
		</blockquote>
	</section>

	<section class="home-section">
		<h2 class="section-title">Experience</h2>
		<Experiences count={2} />
	</section>

	<section class="home-section site-meta">
		<h2 class="section-title">Site Meta</h2>
		<div class="meta-grid">
			<p>
				Built with <a href="https://astro.build/" target="_blank"
					>Astro</a
				>, themed with a custom minimal CSS foundation, and deployed on <a
					href="https://netlify.com/"
					target="_blank">Netlify</a
				>.
			</p>
			<p>
				The source is open <a
					href={`https://github.com/${socials.githubUsername}/alvs.dev`}
					target="_blank">@github</a
				>. You can read more about the build process and future plans <a
					href="./projects/alvs/">here</a
				>.
			</p>
		</div>
		<p class="meta-footer">
			Every section of this site has long changelogs. I am completely
			unsure of what goes in.
		</p>
	</section>
</PageLayout>

<style>
	.home-hero {
		margin-bottom: 6rem;
		margin-top: 2rem;
	}

	.hero-text {
		font-size: 1.25rem;
		line-height: 1.7;
		max-width: 65ch;
		color: var(--text-muted);
	}

	.home-section {
		margin-bottom: 5rem;
	}

	.section-title {
		font-size: 0.875rem;
		text-transform: uppercase;
		letter-spacing: 0.15em;
		color: var(--text-light);
		font-weight: 700;
		margin-bottom: 2rem;
		border-bottom: 1px solid var(--border-muted);
		padding-bottom: 0.5rem;
		display: block;
	}

	.projects-list {
		display: flex;
		flex-direction: column;
		margin-top: -1.5rem; /* Offset ProjectCard internal padding */
	}

	.section-footer {
		margin-top: 1rem;
		font-size: 0.95rem;
		font-weight: 600;
	}

	.section-footer a {
		color: var(--text);
		text-decoration: none;
		border-bottom: 1px solid transparent;
		transition: var(--transition);
	}

	.section-footer a:hover {
		border-bottom-color: var(--text);
	}

	.skills-container {
		margin-left: -0.5rem;
	}

	.skills-container :global(#skills) {
		justify-content: flex-start !important;
	}

	.skills-note {
		margin: 1.5rem 0 0 0;
		font-size: 0.9rem;
		color: var(--text-muted);
	}

	.meta-grid {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 3rem;
		margin-bottom: 2rem;
	}

	.meta-grid p {
		margin: 0;
		font-size: 0.95rem;
		line-height: 1.6;
		color: var(--text-muted);
	}

	.meta-footer {
		color: var(--text-light);
		font-style: italic;
		font-size: 0.85rem !important;
		margin-top: 1rem;
	}

	@media (max-width: 768px) {
		.home-hero {
			margin-bottom: 4rem;
		}

		.hero-text {
			font-size: 1.125rem;
		}

		.meta-grid {
			grid-template-columns: 1fr;
			gap: 1.5rem;
		}

		.home-section {
			margin-bottom: 4rem;
		}
	}
</style>
