<div class="cute-cube" id="cute-cube">
	<div class="face" id="cube-face">
		<div class="eye left"></div>
		<div class="eye right"></div>
		<div class="mouth"></div>
		<div class="cheeks left"></div>
		<div class="cheeks right"></div>
	</div>
</div>

<script>
	const face = document.getElementById("cube-face");

	function updateFacePosition(e: MouseEvent) {
		if (!face) return;

		const { clientX, clientY } = e;
		const { innerWidth, innerHeight } = window;

		// Calculate position relative to center (range -1 to 1)
		const xPct = (clientX / innerWidth - 0.5) * 2;
		const yPct = (clientY / innerHeight - 0.5) * 2;

		// Limit movement to +/- 3px
		const xMove = xPct * 3;
		const yMove = yPct * 3;

		face.style.transform = `translate(${xMove}px, ${yMove}px)`;
	}

	// Only add listener if device supports hover (desktop)
	if (window.matchMedia("(hover: hover)").matches) {
		window.addEventListener("mousemove", updateFacePosition);
	}
</script>

<style>
	.cute-cube {
		height: 24px;
		width: 24px;
		background-color: var(--accent);
		border-radius: 6px;
		position: relative;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
		transition: transform 0.2s ease;
	}

	.cute-cube:hover {
		transform: scale(1.1);
	}

	.face {
		position: relative;
		width: 100%;
		height: 100%;
		animation: look-around 8s infinite;
		will-change: transform;
	}

	/* Disable look-around animation on devices with hover (desktop) */
	@media (hover: hover) {
		.face {
			animation: none;
		}
	}

	.eye {
		position: absolute;
		top: 35%;
		width: 4px;
		height: 4px;
		background-color: #f0f0f0;
		border-radius: 50%;
		box-shadow: 0 0 1px rgba(0, 0, 0, 0.3);
		animation: blink 4s infinite;
	}

	.eye.left {
		left: 20%;
	}

	.eye.right {
		right: 20%;
	}

	.mouth {
		position: absolute;
		bottom: 25%;
		left: 50%;
		transform: translateX(-50%);
		width: 6px;
		height: 3px;
		border-bottom: 1.5px solid #f0f0f0;
		border-radius: 0 0 10px 10px;
		transition:
			height 0.2s,
			border-bottom 0.2s;
	}

	.cute-cube:hover .mouth {
		height: 5px;
		border-bottom-width: 2px;
	}

	.cheeks {
		position: absolute;
		top: 45%;
		width: 5px;
		height: 3px;
		background-color: rgba(255, 255, 255, 0.3);
		border-radius: 50%;
	}

	.cheeks.left {
		left: 10%;
	}

	.cheeks.right {
		right: 10%;
	}

	@keyframes blink {
		0%,
		48%,
		52%,
		100% {
			transform: scaleY(1);
		}
		50% {
			transform: scaleY(0.1);
		}
	}

	@keyframes look-around {
		0%,
		20% {
			transform: translate(0, 0);
		}
		25%,
		45% {
			transform: translate(-1px, 1px);
		}
		50%,
		70% {
			transform: translate(0, 0);
		}
		75%,
		95% {
			transform: translate(1px, -1px);
		}
		100% {
			transform: translate(0, 0);
		}
	}
</style>
