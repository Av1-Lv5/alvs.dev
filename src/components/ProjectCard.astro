---
// types
import type { CollectionEntry } from "astro:content";
export interface Props {
	project: CollectionEntry<"projects">;
}

// Utils
import arrayToLongString from "../utils/arrayToLongString";

// props
const { project } = Astro.props as Props;
---

<div class="project-item" tags={arrayToLongString(project.data.tags)}>
	<div class="project-header">
		<h3 class="title">
			<a href={`/projects/${project.slug}`}>{project.data.title}</a>
		</h3>
		<div class="project-meta">
			{
				project.data.liveAt && (
					<a
						href={`https://${project.data.liveAt}`}
						target="_blank"
						class="meta-link"
					>
						Live
					</a>
				)
			}
			{
				project.data.repoId && (
					<a
						href={`https://github.com/Av1-Lv5/${project.data.repoId}`}
						target="_blank"
						class="meta-link"
					>
						Code
					</a>
				)
			}
		</div>
	</div>

	<div class="project-details">
		<p class="description">
			{project.data.description}
		</p>
		<div class="tags">
			{project.data.tags.map((tag) => <span class="tag">{tag}</span>)}
		</div>
	</div>
</div>

<style>
	.project-item {
		display: grid;
		grid-template-columns: 1fr 3fr;
		gap: 1.5rem;
		padding: 1.5rem 0;
		border-bottom: 1px solid var(--border-muted);
		align-items: baseline;
	}

	.project-item:last-child {
		border-bottom: none;
	}

	/* Left Column: Header */
	.project-header {
		display: flex;
		flex-direction: column;
		gap: 0.5rem; /* Tighter gap */
		align-items: flex-start;
	}

	.title {
		margin: 0;
		font-size: 1.125rem; /* Smaller title */
		font-weight: 600;
		line-height: 1.4;
		letter-spacing: -0.01em;
	}

	.title a {
		color: var(--text);
		text-decoration: none;
		transition: color 0.2s ease;
	}

	.title a:hover {
		color: var(--accent);
	}

	.project-meta {
		display: flex;
		gap: 0.75rem;
	}

	.meta-link {
		font-size: 0.75rem; /* Smaller meta links */
		color: var(--text-light);
		text-decoration: none;
		transition: color 0.2s ease;
		position: relative;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		font-weight: 500;
	}

	.meta-link::after {
		content: "";
		position: absolute;
		width: 100%;
		height: 1px;
		background-color: var(--text-light);
		bottom: -1px;
		left: 0;
		transform: scaleX(0);
		transform-origin: bottom right;
		transition: transform 0.2s ease-out;
	}

	.meta-link:hover {
		color: var(--text);
	}

	.meta-link:hover::after {
		transform: scaleX(1);
		transform-origin: bottom left;
	}

	/* Right Column: Details */
	.project-details {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
	}

	.description {
		margin: 0;
		font-size: 1rem;
		line-height: 1.5;
		color: var(--text-muted);
		max-width: 65ch;
	}

	.tags {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
		row-gap: 0.25rem;
	}

	.tag {
		font-size: 0.75rem;
		color: var(--text-light);
		font-family: var(--mono);
	}

	.tag::before {
		content: "#";
		opacity: 0.5;
		margin-right: 1px;
	}

	@media (max-width: 768px) {
		.project-item {
			grid-template-columns: 1fr;
			gap: 0.75rem;
			padding: 1.5rem 0;
		}

		.project-header {
			flex-direction: row;
			justify-content: space-between;
			align-items: center;
		}

		.title {
			font-size: 1.125rem;
		}
	}
</style>
